{% extends 'template.html' %}
{% load bootstrap5 %}
{% load static%}
{% block title %}EDITAL - {{edital.nome}}{% endblock %}
{% block css %}
<link rel="stylesheet" href="{% static 'css/cursos.css' %}">
<script src="{% static 'js/cursos.js' %}"></script>
{% endblock %}
{% block editais %}fw-bold{% endblock %}
{% block main %}
<div class="row" id="edital">
    <div class="col d-flex py-5">
        <div class="row w-100">
            <!-- Container branco centralizado -->
            <div class="col-10 pb-4 m-auto bg-white">

                <!-- Cabe√ßalho do edital -->
                <div class="row py-3 px-4">
                    <div class="col bg p-5">
                        <h1 class="display-4 text-center">INFORMA√á√ïES DO EDITAL</h1>
                    </div>
                </div>

                <!-- Informa√ß√µes principais -->
                <div class="row d-flex">
                    <div class="col d-flex flex-column px-4 pt-5 text-dark text-justify mx-auto" style="font-size: 16pt; max-width: 900px;">
                        <h1 class="text-center mb-3">{{edital.nome}}</h1>
                        <!-- Link para o di√°rio oficial -->
                        <a style="font-size: 10pt;" class="mx-auto" target="_blank" href="{{edital.link_diario_oficial}}">
                            Link da publica√ß√£o no Di√°rio Oficial do Munic√≠pio
                        </a>
                        <!-- Texto descritivo do edital -->
                        <div class="pt-4">
                            {% for linha in descricao %}
                                <p>{{linha}}</p>
                            {% endfor %}
                        </div>
                    </div>
                </div>

                <!-- Se houver resultado publicado -->
                {% if exibir_resultado %}
                <div class="row">
                    <div class="col px-4 text-dark mx-auto d-flex flex-column" style="font-size: 16pt; max-width: 900px;">
                        <hr>
                        <h3 class="mb-5">RESULTADO</h3>
                        <a href="{{edital.link_resultado}}" class="btn btn-success mx-auto mb-5 px-5 py-3">
                            Visualizar resultado
                        </a>
                    </div>
                </div>
                {% endif %}

                <!-- √Årea de downloads -->
                <div class="row">
                    <div class="col px-4 text-dark mx-auto" style="font-size: 16pt; max-width: 900px;">
                        <hr>
                        <h3 class="mb-2">DOWNLOADS</h3>
                        <ul class="my-4">
                            {% for download in downloads %}
                            <li>
                                <a target="_blank" href="{{download.link}}" style="font-size: 12pt;">
                                    <i class="fa-solid fa-download me-3"></i>{{download.nome}}
                                </a>
                            </li>
                            {% empty %}
                            <li>
                                <p class="text-center">Nenhum link dispon√≠vel at√© o momento.</p>
                            </li>
                            {% endfor %}
                        </ul>
                        <hr>
                    </div>
                </div>

                <!-- √Årea de inscri√ß√£o -->
                {% if inscricao %}
                <div class="row">
                    <div class="col px-4 text-dark mx-auto d-flex flex-column" style="font-size: 16pt; max-width: 900px;">
                        <h3 class="mb-5">INSCRI√á√ÉO</h3>
                        <a href="{% url 'selecao:cadastro' edital.id %}"
                           class="btn btn-info mb-5 mx-auto px-5 py-3"
                           style="background-color: #77D5CA;">
                            INSCREVER-SE
                        </a>
                    </div>
                </div>
                {% elif encerrar_inscricao %}
                <!-- Caso as inscri√ß√µes tenham sido encerradas -->
                <div class="row">
                    <div class="col px-4 text-dark mx-auto d-flex flex-column" style="font-size: 16pt; max-width: 900px;">
                        <h3 class="mb-4">INSCRI√á√ÉO ENCERRADA</h3>
                        <h5 class="mb-5 text-center">
                            <a target="_blank" href="#">
                                <i class="fa-solid fa-download me-3"></i>Clique aqui para ver o local da prova!
                            </a>
                        </h5>
                    </div>
                </div>
                {% else %}
                <!-- Per√≠odo de inscri√ß√£o (caso ainda n√£o tenha iniciado ou esteja em andamento) -->
                <div class="row">
                    <div class="col px-4 text-dark mx-auto d-flex flex-column" style="font-size: 16pt; max-width: 900px;">
                        <h3 class="mb-2">INSCRI√á√ÉO</h3>
                        <h5 class="text-center mb-5">{{ edital.dt_inicio_inscricao }}<br>at√©<br>{{ edital.dt_final_inscricao }}</h5>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<style>
    /* Estilo do texto justificado */
    #edital .text-justify p:first-child{
        margin-top: 30px;
    }
    #edital .text-justify p{
        text-indent: 50px;
        margin-bottom: 30px;
    }
    #edital .text-justify ul{
        margin-bottom: 20px;
    }
    #edital .text-justify ul li{
        list-style: circle !important;
    }

    /* üîπ Ajustes para tablets e celulares */
    @media (max-width: 991px) {
        /* Container ocupa mais espa√ßo na tela */
        #edital .col-10 {
            width: 95% !important;
        }
        /* Centralizar t√≠tulos */
        #edital h1, #edital h3, #edital h5 {
            text-align: center !important;
        }
        /* Fonte menor */
        #edital .col {
            font-size: 14pt !important;
            padding: 15px !important;
        }
        /* Bot√µes mais largos */
        #edital .btn {
            width: 100% !important;
            font-size: 14pt !important;
            padding: 12px !important;
        }
    }

    /* üîπ Ajustes para celulares pequenos */
    @media (max-width: 576px) {
        /* Reduz ainda mais o tamanho da fonte */
        #edital .col {
            font-size: 12pt !important;
        }
        #edital h1 {
            font-size: 22px !important;
        }
        #edital h3 {
            font-size: 18px !important;
        }
        #edital h5 {
            font-size: 16px !important;
        }
        /* Bot√µes compactos */
        #edital .btn {
            font-size: 12pt !important;
            padding: 10px !important;
        }
        #edital a {
            font-size: 11pt !important;
        }
    }
</style>

<!-- üîπ Modal de Aten√ß√£o -->
<div id="alertaModal" class="alerta-overlay">
    <div class="alerta-content">
        <span class="alerta-fechar">&times;</span>
        <h2 class="alerta-titulo">
            ‚ö†Ô∏è Aten√ß√£o ‚ö†Ô∏è
        </h2>
        <p>
            O candidato que desejar concorrer √†s vagas reservadas dever√° preencher, assinar e anexar em PDF o
            <b>Termo de Ades√£o (anexo I)</b> corretamente, sob pena de exclus√£o do processo seletivo.
        </p>
        <p>
            De acordo com o Edital, item 1.3:
            <i>‚ÄúAs informa√ß√µes prestadas no formul√°rio de inscri√ß√£o s√£o de inteira responsabilidade do candidato, reservando-se √† Comiss√£o o direito de excluir do Processo Seletivo P√∫blico aquele que n√£o preencher esse documento oficial de forma completa e correta, e/ou fornecer dados inver√≠dicos ou falsos‚Äù.</i>
        </p>
    </div>
</div>

<style>
/* üîπ CSS do modal */
.alerta-overlay {
    display: none;
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.6);
    z-index: 2000;
    backdrop-filter: blur(2px);
}
.alerta-content {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    background: #f8d7da;
    border: 1px solid #f5c2c7;
    color: #842029;
    padding: 2rem;
    border-radius: 0.5rem;
    width: 90%; max-width: 700px;
    box-shadow: 0 0.5rem 1rem rgba(0,0,0,0.3);
    font-size: 1.1rem;
    text-align: justify; /* üîπ Texto justificado */
}
.alerta-titulo {
    text-align: center; /* üîπ Centraliza t√≠tulo */
    font-weight: bold;
    margin-bottom: 1rem;
}
.alerta-fechar {
    position: absolute;
    top: 10px; right: 15px;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
    color: #842029;
}
.alerta-fechar:hover { color: #000; }
</style>

<script>
/* üîπ JS para abrir/fechar o modal (sempre aparece ao carregar) */
document.addEventListener("DOMContentLoaded", function() {
    document.getElementById("alertaModal").style.display = "block";

    document.querySelector(".alerta-fechar").onclick = function() {
        document.getElementById("alertaModal").style.display = "none";
    };

    window.onclick = function(event) {
        const modal = document.getElementById("alertaModal");
        if (event.target === modal) {
            modal.style.display = "none";
        }
    };
});
</script>

{% endblock %}
